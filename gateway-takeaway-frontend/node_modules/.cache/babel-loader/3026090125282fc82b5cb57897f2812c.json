{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/aleks/Documents/GitHub/frontend/gateway-takeaway-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/aleks/Documents/GitHub/frontend/gateway-takeaway-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/aleks/Documents/GitHub/frontend/gateway-takeaway-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useEffect}from\"react\";import{Link}from'react-router-dom';import styles from\"./ResultPage.module.css\";import axios from\"axios\";import jwt from'jsonwebtoken';import{UserAuthContext}from'./Contexts';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ResultPage(){var UserAuthContextValue=useContext(UserAuthContext);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),restaurants=_useState2[0],setRestaurants=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),customers=_useState4[0],setCustomers=_useState4[1];useEffect(function(){getCustomer();},[]);useEffect(function(){postSearchRestaurant();},[]);var getCustomer=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('https://back-end-22-group.herokuapp.com/customer',{headers:{'Content-Type':'application/json','Authorization':'Bearer '+UserAuthContextValue.jwt}});case 3:results=_context.sent;setCustomers(results.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getCustomer(){return _ref.apply(this,arguments);};}();var postSearchRestaurant=function postSearchRestaurant(){axios({headers:{'Content-Type':'application/json','Authorization':'Bearer '+UserAuthContextValue.jwt},method:\"post\",data:{restaurant_name:restaurants},url:\"https://back-end-22-group.herokuapp.com/restaurant/search\"}).then(function(res){return console.log(res);});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.headerContainer,children:[/*#__PURE__*/_jsx(Link,{to:\"/home\",style:{color:'inherit',textDecoration:'none'},children:/*#__PURE__*/_jsx(\"div\",{className:styles.brandText,children:\"Gateway Takeaway\"})}),customers.map(function(customer){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Welcome \",customer.first_name,\" \",customer.last_name]});}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"type a restaurant\",onChange:function onChange(e){return setRestaurants(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:postSearchRestaurant,children:\" Search \"})]}),restaurants.map(function(restaurant){return/*#__PURE__*/_jsxs(\"div\",{className:styles.restaurantContainer,children:[/*#__PURE__*/_jsx(\"img\",{src:restaurant.image,width:336,height:180}),/*#__PURE__*/_jsxs(\"div\",{children:[\" \",restaurant.restaurant_name,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\" \",restaurant.address,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\" \",restaurant.operating_hours,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\" \",restaurant.type,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\" \",restaurant.price_level,\" \"]})]});})]});}","map":{"version":3,"sources":["C:/Users/aleks/Documents/GitHub/frontend/gateway-takeaway-frontend/src/components/ResultPage.js"],"names":["React","useContext","useState","useEffect","Link","styles","axios","jwt","UserAuthContext","ResultPage","UserAuthContextValue","restaurants","setRestaurants","customers","setCustomers","getCustomer","postSearchRestaurant","get","headers","results","data","console","error","method","restaurant_name","url","then","res","log","headerContainer","color","textDecoration","brandText","map","customer","first_name","last_name","e","target","value","restaurant","restaurantContainer","image","address","operating_hours","type","price_level"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\"\r\nimport { Link } from 'react-router-dom';\r\nimport styles from \"./ResultPage.module.css\";\r\nimport axios from \"axios\";\r\nimport jwt from 'jsonwebtoken';\r\nimport { UserAuthContext } from './Contexts';\r\n\r\nexport default function ResultPage() {\r\n\r\n    const UserAuthContextValue = useContext(UserAuthContext);\r\n\r\n    const [restaurants, setRestaurants] = useState([]);\r\n    const [customers, setCustomers] = useState([]);\r\n\r\n    useEffect(() => {\r\n        getCustomer();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        postSearchRestaurant();\r\n    }, []);\r\n\r\n    const getCustomer = async () => {\r\n        try {\r\n          const results = await axios.get('https://back-end-22-group.herokuapp.com/customer', {\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': 'Bearer ' + UserAuthContextValue.jwt\r\n              }\r\n          });\r\n    \r\n          setCustomers(results.data);\r\n        } catch (error) {\r\n          console.error(error);\r\n        }\r\n      };\r\n    \r\n    const postSearchRestaurant = () => {\r\n        axios({\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': 'Bearer ' + UserAuthContextValue.jwt\r\n            },\r\n            method: \"post\",\r\n            data: {\r\n                restaurant_name: restaurants,\r\n            },\r\n            url: \"https://back-end-22-group.herokuapp.com/restaurant/search\",\r\n        })\r\n        .then((res) => console.log(res));\r\n    };\r\n    \r\n\r\n    return (\r\n        <div>\r\n        <div className={styles.headerContainer}>\r\n            <Link to=\"/home\" style={{ color: 'inherit', textDecoration: 'none' }}><div className={ styles.brandText }>Gateway Takeaway</div></Link>\r\n            {\r\n                customers.map((customer) => {\r\n                    return <div>\r\n                        Welcome { customer.first_name } { customer.last_name }\r\n                    </div>\r\n                })\r\n            }\r\n            <input placeholder=\"type a restaurant\" onChange={e => setRestaurants(e.target.value)} />\r\n            <button onClick={postSearchRestaurant}> Search </button>\r\n        </div>\r\n\r\n        {/* <div className={ styles.restaurantContainer }>\r\n                    {restaurants.length ? restaurants : <div> No restaurant yet </div>}\r\n                    <img src={restaurants.image} width={336} height={180} />\r\n                    <div> {restaurants.restaurant_name} </div>\r\n                    <div> {restaurants.address} </div>\r\n                    <div> {restaurants.operating_hours} </div>\r\n                    <div> {restaurants.type} </div>\r\n                    <div> {restaurants.price_level} </div>\r\n                </div> */}\r\n\r\n        {\r\n            restaurants.map((restaurant) => {\r\n                return <div className={ styles.restaurantContainer }>\r\n                    {/* {restaurant.length ? restaurant : <div> No restaurant yet </div>} */}\r\n                    <img src={restaurant.image} width={336} height={180} />\r\n                    <div> {restaurant.restaurant_name} </div>\r\n                    <div> {restaurant.address} </div>\r\n                    <div> {restaurant.operating_hours} </div>\r\n                    <div> {restaurant.type} </div>\r\n                    <div> {restaurant.price_level} </div>\r\n                </div>\r\n            })\r\n        }\r\n        {/* return(\r\n        <div className='list'>\r\n            {notes.length ? notes : <p>Default Markup</p>}\r\n        </div>\r\n        ); */}\r\n\r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}