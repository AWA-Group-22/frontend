{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/aleks/Documents/GitHub/frontend/gateway-takeaway-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/aleks/Documents/GitHub/frontend/gateway-takeaway-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/aleks/Documents/GitHub/frontend/gateway-takeaway-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import{Link,useNavigate}from'react-router-dom';import styles from'./LoginPage.module.css';import axios from'axios';import{UserAuthContext}from'./Contexts';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function LoginPage(props){var UserAuthContextValue=useContext(UserAuthContext);var navigate=useNavigate();var _useState=useState(\"idle\"),_useState2=_slicedToArray(_useState,2),loginProcessState=_useState2[0],setLoginProcessState=_useState2[1];var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();setLoginProcessState(\"processing\");_context.prev=2;_context.next=5;return axios.post('https://back-end-22-group.herokuapp.com/login',null,{auth:{username:event.target.username.value,password:event.target.password.value}});case 5:result=_context.sent;console.log(result);console.log(result.data);setLoginProcessState(\"success\");setTimeout(function(){setLoginProcessState(\"idle\");UserAuthContextValue.login(result.data.jwt);navigate(\"/home\",{replace:true});},1500);_context.next=17;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](2);console.error(_context.t0.message);setLoginProcessState(\"error\");setTimeout(function(){return setLoginProcessState(\"idle\");},1500);case 17:case\"end\":return _context.stop();}}},_callee,null,[[2,12]]);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();var loginUIControls=null;switch(loginProcessState){case\"idle\":loginUIControls=/*#__PURE__*/_jsx(\"button\",{className:styles.signInButton,type:\"submit\",children:\"Login\"});break;case\"processing\":loginUIControls=/*#__PURE__*/_jsx(\"span\",{style:{color:'blue'},children:\"Processing login...\"});break;case\"success\":loginUIControls=/*#__PURE__*/_jsx(\"span\",{style:{color:'green'},children:\"Login successful\"});break;case\"error\":loginUIControls=/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"Error\"});break;default:loginUIControls=/*#__PURE__*/_jsx(\"button\",{className:styles.signInButton,type:\"submit\",children:\"Login\"});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:styles.headerContainer,children:[/*#__PURE__*/_jsx(Link,{to:\"/\",style:{color:'inherit',textDecoration:'none'},children:/*#__PURE__*/_jsx(\"div\",{className:styles.brandText,children:\"Gateway Takeaway\"})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.titleText,children:\"Sign in\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.subtitleText,children:\"Login with your account\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.lowerText,children:[\"Don't have an account?\",/*#__PURE__*/_jsx(Link,{to:\"/signup\",style:{textDecoration:'none'},children:\"Sign up\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.usernameText,children:[\"Username\",/*#__PURE__*/_jsx(\"input\",{className:styles.usernameField,type:\"text\",name:\"username\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.passwordText,children:[\"Password \",/*#__PURE__*/_jsx(\"input\",{className:styles.passwordField,type:\"password\",name:\"password\"})]}),/*#__PURE__*/_jsx(\"div\",{children:loginUIControls}),/*#__PURE__*/_jsx(\"div\",{className:styles.managerLoginLink,children:/*#__PURE__*/_jsx(Link,{to:\"/managerlogin\",style:{textDecoration:'none'},children:\"Manager sign in\"})})]})]})]})});}","map":{"version":3,"sources":["C:/Users/aleks/Documents/GitHub/frontend/gateway-takeaway-frontend/src/components/LoginPage.js"],"names":["React","useState","useContext","Link","useNavigate","styles","axios","UserAuthContext","LoginPage","props","UserAuthContextValue","navigate","loginProcessState","setLoginProcessState","onSubmit","event","preventDefault","post","auth","username","target","value","password","result","console","log","data","setTimeout","login","jwt","replace","error","message","loginUIControls","signInButton","color","headerContainer","textDecoration","brandText","container","titleText","subtitleText","lowerText","usernameText","usernameField","passwordText","passwordField","managerLoginLink"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport styles from './LoginPage.module.css';\r\nimport axios from 'axios';\r\nimport {UserAuthContext} from './Contexts'\r\n\r\nexport default function LoginPage(props) {\r\n\r\n  const UserAuthContextValue = useContext(UserAuthContext);\r\n\r\n  let navigate = useNavigate();\r\n\r\n  const [ loginProcessState, setLoginProcessState ] = useState(\"idle\");\r\n\r\n  const onSubmit = async (event) => {\r\n    event.preventDefault();\r\n    setLoginProcessState(\"processing\");\r\n    try {\r\n      const result = await axios.post('https://back-end-22-group.herokuapp.com/login', null, {\r\n        auth: {\r\n          username: event.target.username.value,\r\n          password: event.target.password.value\r\n        }\r\n      })\r\n      console.log(result);\r\n      console.log(result.data);\r\n      setLoginProcessState(\"success\");\r\n      setTimeout(() => {\r\n        setLoginProcessState(\"idle\")\r\n        UserAuthContextValue.login(result.data.jwt);\r\n        navigate(\"/home\", { replace: true });\r\n      }, 1500);\r\n    } catch (error) {\r\n      console.error(error.message);\r\n      setLoginProcessState(\"error\");\r\n      setTimeout(() => setLoginProcessState(\"idle\"), 1500);\r\n    }\r\n  }\r\n\r\n  let loginUIControls = null;\r\n  switch(loginProcessState) {\r\n    case \"idle\":\r\n      loginUIControls = <button className={styles.signInButton} type=\"submit\">Login</button>\r\n      break;\r\n\r\n    case \"processing\":\r\n      loginUIControls = <span style={{color: 'blue'}}>Processing login...</span>\r\n      break;\r\n\r\n    case \"success\":\r\n      loginUIControls = <span style={{color: 'green'}}>Login successful</span>\r\n      break;\r\n\r\n    case \"error\":\r\n      loginUIControls = <span style={{color: 'red'}}>Error</span>\r\n      break;\r\n\r\n    default:\r\n      loginUIControls = <button className={styles.signInButton} type=\"submit\">Login</button>\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className={styles.headerContainer}>\r\n          <Link to=\"/\" style={{ color: 'inherit', textDecoration: 'none' }}><div className={ styles.brandText }>Gateway Takeaway</div></Link>\r\n          <div className={styles.container}>\r\n              <div className={styles.titleText}>Sign in</div>\r\n              <div className={styles.subtitleText}>Login with your account</div>\r\n              <div className={styles.lowerText}>Don't have an account?\r\n                  <Link to=\"/signup\" style={{ textDecoration: 'none' }}>Sign up</Link></div>\r\n              <form onSubmit={ onSubmit }>\r\n                  <div className={styles.usernameText}>Username<input className={styles.usernameField} type=\"text\" name=\"username\"/></div>\r\n                  <div className={styles.passwordText}>Password <input className={styles.passwordField} type=\"password\" name=\"password\"/></div>\r\n                  <div>\r\n                      { loginUIControls }\r\n                  </div>\r\n                  <div className={styles.managerLoginLink}>\r\n                    <Link to=\"/managerlogin\" style={{ textDecoration: 'none' }}>Manager sign in</Link>\r\n                  </div>\r\n              </form>\r\n          </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}"]},"metadata":{},"sourceType":"module"}