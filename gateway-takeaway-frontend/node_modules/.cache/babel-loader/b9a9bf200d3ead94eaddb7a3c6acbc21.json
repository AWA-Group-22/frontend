{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/aleks/Documents/GitHub/frontend/gateway-takeaway-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/aleks/Documents/GitHub/frontend/gateway-takeaway-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/aleks/Documents/GitHub/frontend/gateway-takeaway-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import styles from'./ManagerOrderPage.module.css';import axios from'axios';import{Link,useNavigate}from'react-router-dom';import{UserAuthContext}from'./Contexts';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ManagerOrderPage(){var UserAuthContextValue=useContext(UserAuthContext);var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),ManagerOrderPageData=_useState2[0],setManagerOrderPageData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),orders=_useState4[0],setOrders=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),ordersHistory=_useState6[0],setOrdersHistory=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),changeOrderId=_useState8[0],setChangeOrderId=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),changeOrderStatus=_useState10[0],setChangeOrderStatus=_useState10[1];useEffect(function(){getOrders();},[]);useEffect(function(){getOrderHistory();},[]);var getOrders=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('https://back-end-22-group.herokuapp.com/manager/order/modify/status',{headers:{'Content-Type':'application/json','Authorization':'Bearer '+UserAuthContextValue.jwt}});case 3:results=_context.sent;setOrders(results.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getOrders(){return _ref.apply(this,arguments);};}();var getOrderHistory=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var results;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get('https://back-end-22-group.herokuapp.com/manager/order/history',{headers:{'Content-Type':'application/json','Authorization':'Bearer '+UserAuthContextValue.jwt}});case 3:results=_context2.sent;setOrdersHistory(results.data);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function getOrderHistory(){return _ref2.apply(this,arguments);};}();var handleChangeOrderStatus=function handleChangeOrderStatus(){axios({headers:{'Content-Type':'application/json','Authorization':'Bearer '+UserAuthContextValue.jwt},method:\"post\",data:{order_id:changeOrderId,order_status:changeOrderStatus},url:\"https://back-end-22-group.herokuapp.com/manager/order/modify/status\"}).then(function(res){return console.log(res);});// navigate(\"/managerorderpage\", { replace: true });\n// window.location.reload(false);\n};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.headerContainer,children:[/*#__PURE__*/_jsx(Link,{to:\"/home\",style:{color:'inherit',textDecoration:'none'},children:/*#__PURE__*/_jsx(\"div\",{className:styles.brandText,children:\"Gateway Takeaway\"})}),/*#__PURE__*/_jsx(\"div\",{className:styles.backButton,children:/*#__PURE__*/_jsx(Link,{to:\"/managerpage\",style:{color:'inherit',textDecoration:'none'},children:\"Back\"})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:styles.titleText,children:\"Manager order page\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.changeOrderStatus,children:[\"Change a specific order status\",/*#__PURE__*/_jsx(\"input\",{placeholder:\"order id\",onChange:function onChange(e){return setChangeOrderId(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"order status\",onChange:function onChange(e){return setChangeOrderStatus(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleChangeOrderStatus,className:styles.signUpButton,children:\"Change order status\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return window.location.reload(false);},children:\"Refresh page\"})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.currentOrderText,children:\"Current user orders:\"}),orders.map(function(order,index){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:styles.currentOrderContainer,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.currentOrderId,children:[\" Order id: \",order.order_id,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.currentOrderStatus,children:[\" Order status: \",order.order_status,\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:styles.currentOrderProduct,children:\" Ordered product(s): \"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.currentProductId,children:[\" Product id: \",order.product_id,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.currentProductName,children:[\" Product name: \",order.product_name,\" \"]})]})},index);}),/*#__PURE__*/_jsx(\"div\",{className:styles.historyDivText,children:\" Order history: \"}),ordersHistory.map(function(history,index){return/*#__PURE__*/_jsx(\"div\",{className:styles.bigOrderContainer,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.orderContainer,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.currentOrderId,children:[\" Order id: \",history.order_id,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.currentOrderStatus,children:[\" Order status: \",history.order_status,\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:styles.currentOrderProduct,children:\" Ordered product(s): \"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.currentProductId,children:[\" Product id: \",history.product_id,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.currentProductName,children:[\" Product name: \",history.product_name,\" \"]})]})},index);})]})]});}","map":{"version":3,"sources":["C:/Users/aleks/Documents/GitHub/frontend/gateway-takeaway-frontend/src/components/ManagerOrderPage.js"],"names":["React","useState","useEffect","useContext","styles","axios","Link","useNavigate","UserAuthContext","ManagerOrderPage","UserAuthContextValue","navigate","ManagerOrderPageData","setManagerOrderPageData","orders","setOrders","ordersHistory","setOrdersHistory","changeOrderId","setChangeOrderId","changeOrderStatus","setChangeOrderStatus","getOrders","getOrderHistory","get","headers","jwt","results","data","console","error","handleChangeOrderStatus","method","order_id","order_status","url","then","res","log","headerContainer","color","textDecoration","brandText","backButton","titleText","e","target","value","signUpButton","window","location","reload","currentOrderText","map","order","index","currentOrderContainer","currentOrderId","currentOrderStatus","currentOrderProduct","currentProductId","product_id","currentProductName","product_name","historyDivText","history","bigOrderContainer","orderContainer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport styles from './ManagerOrderPage.module.css';\r\nimport axios from 'axios';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { UserAuthContext } from './Contexts';\r\n\r\nexport default function ManagerOrderPage() {\r\n\r\n    const UserAuthContextValue = useContext(UserAuthContext);\r\n\r\n    let navigate = useNavigate();\r\n\r\n    const [ ManagerOrderPageData, setManagerOrderPageData ] = useState([]);\r\n    const [ orders, setOrders ] = useState([]);\r\n    const [ ordersHistory, setOrdersHistory ] = useState([]);\r\n\r\n    const [ changeOrderId, setChangeOrderId ] = useState(\"\");\r\n    const [ changeOrderStatus, setChangeOrderStatus ] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        getOrders();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        getOrderHistory();\r\n    }, []);\r\n\r\n    const getOrders = async () => {\r\n        try {\r\n          const results = await axios.get('https://back-end-22-group.herokuapp.com/manager/order/modify/status', {\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': 'Bearer ' + UserAuthContextValue.jwt\r\n              }\r\n          });\r\n    \r\n          setOrders(results.data);\r\n        } catch (error) {\r\n          console.error(error);\r\n        }\r\n      };\r\n  \r\n    const getOrderHistory = async () => {\r\n        try {\r\n          const results = await axios.get('https://back-end-22-group.herokuapp.com/manager/order/history', {\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': 'Bearer ' + UserAuthContextValue.jwt\r\n              }\r\n          });\r\n    \r\n          setOrdersHistory(results.data);\r\n        } catch (error) {\r\n          console.error(error);\r\n        }\r\n      };\r\n\r\n    const handleChangeOrderStatus = () => {\r\n        axios({\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': 'Bearer ' + UserAuthContextValue.jwt\r\n            },\r\n            method: \"post\",\r\n            data: {\r\n                order_id: changeOrderId,\r\n                order_status: changeOrderStatus\r\n            },\r\n            url: \"https://back-end-22-group.herokuapp.com/manager/order/modify/status\",\r\n        })\r\n        .then((res) => console.log(res));\r\n        // navigate(\"/managerorderpage\", { replace: true });\r\n        // window.location.reload(false);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div className={styles.headerContainer}>\r\n            <Link to=\"/home\" style={{ color: 'inherit', textDecoration: 'none' }}><div className={ styles.brandText }>Gateway Takeaway</div></Link>\r\n                {/* <button onClick={ getOrders }>Get orders</button> */}\r\n                {/* <button onClick={ getOrderHistory }>Get order history</button> */}\r\n                <div className={ styles.backButton }>\r\n                    <Link to=\"/managerpage\" style={{ color: 'inherit', textDecoration: 'none' }}>Back</Link></div>\r\n            </div>\r\n                <div>\r\n                    <div className={ styles.titleText }>Manager order page</div>\r\n                    <div className={ styles.changeOrderStatus }>\r\n                        Change a specific order status\r\n                        <input placeholder=\"order id\" onChange={e => setChangeOrderId(e.target.value)} />\r\n                        <input placeholder=\"order status\" onChange={e => setChangeOrderStatus(e.target.value)} />\r\n                            <button onClick={handleChangeOrderStatus} className={styles.signUpButton}>Change order status</button>\r\n                            <button onClick={() => window.location.reload(false)}>Refresh page</button>\r\n                    </div>\r\n                    <div className={ styles.currentOrderText }>Current user orders:</div>\r\n                {\r\n                    orders.map((order, index) => {\r\n                        return <div key={index}>\r\n                            <div className={ styles.currentOrderContainer }>\r\n                                <div className={ styles.currentOrderId }> Order id: { order.order_id } </div>\r\n                                <div className={ styles.currentOrderStatus }> Order status: { order.order_status } </div>\r\n                                <div className={ styles.currentOrderProduct }> Ordered product(s): </div>\r\n                                <div className={ styles.currentProductId }> Product id: { order.product_id } </div>\r\n                                <div className={ styles.currentProductName }> Product name: { order.product_name } </div>\r\n                            </div>\r\n                        </div>\r\n                    })\r\n                }\r\n                    <div className={ styles.historyDivText }> Order history: </div>\r\n                {\r\n                    ordersHistory.map((history, index) => {\r\n                        return <div key={index} className={ styles.bigOrderContainer }>\r\n                            <div className={ styles.orderContainer }>\r\n                            <div className={ styles.currentOrderId }> Order id: { history.order_id } </div>\r\n                                <div className={ styles.currentOrderStatus }> Order status: { history.order_status } </div>\r\n                                    {/* TODO: backend get order id */}\r\n                                <div className={ styles.currentOrderProduct }> Ordered product(s): </div>\r\n                                <div className={ styles.currentProductId }> Product id: { history.product_id } </div>\r\n                                <div className={ styles.currentProductName }> Product name: { history.product_name } </div>\r\n                            </div>\r\n                        </div>\r\n                    })\r\n                }\r\n\r\n                </div>\r\n            \r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}